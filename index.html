<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Movie Flip MVP</title>
  <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@400;500;700&display=swap" rel="stylesheet">
  <style>
    * { margin:0; padding:0; box-sizing:border-box; }
    body {
      font-family: 'Oswald', sans-serif;
      background: linear-gradient(135deg, #8B0000 0%, #400000 100%);
      min-height:100vh; display:flex; justify-content:center; align-items:center; padding:20px;
      letter-spacing:0.5px;
    }

    .game-container {
      position:relative; background:#fff; border-radius:20px; padding:40px;
      box-shadow:0 20px 60px rgba(0,0,0,.4); max-width:800px; width:100%;
    }

    /* Top bar */
    .top-bar {
      display:flex; justify-content:space-between; align-items:center;
      margin-bottom:25px;
    }

    .round-info {
      font-size:1.2em; font-weight:700; color:#8B0000;
      letter-spacing:1px;
    }

    /* Hearts */
    .hearts { display:flex; gap:8px; }
    .heart { width:28px; height:28px; display:inline-flex; }
    .heart svg { display:block; width:100%; height:100%; fill:#8B0000; transition:fill .25s ease, opacity .25s ease; }
    .heart.lost svg { fill:#cbd5e1; opacity:.8; }

    .flip-word {
      text-align:center; font-size:2.2em; color:#8B0000;
      margin-bottom:30px; font-weight:700; letter-spacing:3px;
    }

    /* Solution area */
    .answer-container {
      display:flex; justify-content:center; flex-wrap:wrap;
      gap:28px; margin-bottom:25px; row-gap:35px;
    }
    .word-group { display:flex; gap:6px; }
    .letter-cell {
      width:50px; height:50px; border:3px solid #ddd;
      border-radius:8px; display:flex; justify-content:center; align-items:center;
      font-size:1.5em; font-weight:700; transition:all .3s ease; background:#fff;
    }
    .letter-cell.first-five { border-color:#a7f3d0; }
    .letter-cell.correct { background:#4ade80; border-color:#22c55e; color:#fff; animation:correctPulse .5s ease; }
    .letter-cell.incorrect { background:#f87171; border-color:#ef4444; color:#fff; animation:shake .5s ease; }
    .letter-cell.revealed { background:#bbf7d0; border-color:#86efac; color:#0f5132; animation:reveal .3s ease; }

    @keyframes correctPulse { 0%{transform:scale(1)} 50%{transform:scale(1.1)} 100%{transform:scale(1)} }
    @keyframes shake { 0%,100%{transform:translateX(0)} 25%{transform:translateX(-5px)} 75%{transform:translateX(5px)} }
    @keyframes reveal { 0%{transform:rotateY(0)} 100%{transform:rotateY(360deg)} }

    .next-button {
      display:none; margin:0 auto; padding:12px 30px; background:#8B0000; color:#fff; border:none; border-radius:8px;
      font-size:1.1em; cursor:pointer; transition:background .3s ease;
    }
    .next-button:hover { background:#a10000; }
    .next-button.show { display:block; }

    /* Keyboard */
    .keyboard {
      display:flex; flex-direction:column; align-items:center; gap:6px;
      width:100%; max-width:600px; margin:0 auto;
    }
    .keyboard-row {
      display:flex; justify-content:center; gap:5px; white-space:nowrap;
      width:100%;
    }
    .key {
      flex:1 1 0;
      min-height:38px;
      padding:10px 0;
      background:#eee;
      border-radius:6px;
      text-align:center;
      font-weight:700;
      cursor:pointer;
      user-select:none;
      transition:all .15s;
      display:flex; align-items:center; justify-content:center;
    }
    .key:hover { background:#ddd; }
    .key.pressed { background:#fca5a5; transform:scale(0.95); }

    /* Responsive adjustments */
    @media (max-width:600px) {
      .key {
        font-size:0.85em;
        min-height:32px;
        padding:8px 0;
      }
      .letter-cell {
        width:42px; height:42px; font-size:1.2em; border-width:2.5px;
      }
      .answer-container { gap:22px; row-gap:12px; }
    }

    .game-over { text-align:center; display:none; }
    .game-over.show { display:block; }
    .game-over h2 { color:#8B0000; font-size:2em; margin-bottom:20px; }
    .final-score { font-size:1.5em; color:#333; margin-bottom:20px; }
    .restart-button {
      padding:12px 30px; background:#22c55e; color:#fff; border:none; border-radius:8px;
      font-size:1.1em; cursor:pointer; transition:background .3s ease;
    }
    .restart-button:hover { background:#16a34a; }
  </style>
</head>
<body>
  <div class="game-container">
    <div class="top-bar">
      <div class="round-info" id="roundInfo">1/5</div>
      <div class="hearts" id="hearts"></div>
    </div>

    <div id="gameArea">
      <div class="flip-word" id="flipWord"></div>
      <div class="answer-container" id="answerContainer"></div>
      <div class="keyboard" id="keyboard"></div>
      <br />
      <button class="next-button" id="nextButton" onclick="nextMovie()">NÃ„CHSTER FILM â†’</button>
    </div>

    <div class="game-over" id="gameOver">
      <h2>ðŸŽ‰ GLÃœCKWUNSCH!</h2>
      <div class="final-score">DU HAST ALLE 5 FILME GESCHAFFT!</div>
      <button class="restart-button" onclick="restartGame()">NOCHMAL SPIELEN</button>
    </div>
  </div>

  <script>
    const movies = [
      { flip: "Das Flugzeug", answer: "Das Boot" },
      { flip: "Der Aufstieg", answer: "Der Untergang" },
      { flip: "Cold", answer: "Heat" },
      { flip: "Segen der Ostsee", answer: "Fluch der Karibik" },
      { flip: "White Groom", answer: "Black Widow" }
    ];

    const qwertzLayout = [
      [..."QWERTZUIOPÃœ"],
      [..."ASDFGHJKLÃ–Ã„"],
      [..."YXCVBNM"]
    ];

    let currentMovieIndex = 0;
    let currentLetterIndex = 0;
    let isCompleted = false;
    let lives = 5;
    let outOfLives = false;
    let inputLocked = false;

    function initGame() {
      createKeyboard();
      createHearts();
      loadMovie(currentMovieIndex);
      document.addEventListener('keydown', handleKeyPress);
    }

    function heartSVG() {
      return `
        <svg viewBox="0 0 24 24" aria-hidden="true">
          <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5
                   2 5.42 4.42 3 7.5 3
                   c1.74 0 3.41.81 4.5 2.09
                   C13.09 3.81 14.76 3 16.5 3
                   19.58 3 22 5.42 22 8.5
                   c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
        </svg>`;
    }

    function createHearts() {
      const heartsDiv = document.getElementById('hearts');
      heartsDiv.innerHTML = '';
      for (let i = 0; i < 5; i++) {
        const span = document.createElement('span');
        span.className = 'heart';
        span.innerHTML = heartSVG();
        heartsDiv.appendChild(span);
      }
    }

    function loseHeart() {
      if (lives <= 0 || outOfLives) return;
      const hearts = document.querySelectorAll('.heart');
      const index = 5 - lives;
      if (hearts[index]) hearts[index].classList.add('lost');
      lives--;
      if (lives === 0) {
        outOfLives = true;
        showSadEmojis();
      }
    }

    function showSadEmojis() {
      const cells = document.querySelectorAll('.letter-cell');
      for (let i = currentLetterIndex; i < cells.length; i++) {
        if (!cells[i].textContent) {
          cells[i].textContent = 'ðŸ˜¢';
          cells[i].style.color = '#8B0000';
        }
      }
      document.getElementById('nextButton').classList.add('show');
    }

    function createKeyboard() {
      const kb = document.getElementById('keyboard');
      kb.innerHTML = '';
      qwertzLayout.forEach(row => {
        const rowDiv = document.createElement('div');
        rowDiv.className = 'keyboard-row';
        row.forEach(letter => {
          const key = document.createElement('div');
          key.className = 'key';
          key.textContent = letter;
          key.addEventListener('click', () => {
            key.classList.add('pressed');
            setTimeout(() => key.classList.remove('pressed'), 150);
            handleKeyPress({ key: letter });
          });
          rowDiv.appendChild(key);
        });
        kb.appendChild(rowDiv);
      });
    }

    function loadMovie(index) {
      const movie = movies[index];
      document.getElementById('flipWord').textContent = movie.flip.toUpperCase();
      document.getElementById('roundInfo').textContent = `${index + 1}/${movies.length}`;
      document.getElementById('nextButton').classList.remove('show');

      currentLetterIndex = 0;
      isCompleted = false;
      lives = 5;
      outOfLives = false;
      inputLocked = false;
      createHearts();
      createAnswerCells(movie.answer);
    }

    function createAnswerCells(answer) {
      const container = document.getElementById('answerContainer');
      container.innerHTML = '';
      const words = answer.split(' ');
      let cellCount = 0;
      words.forEach(word => {
        const group = document.createElement('div');
        group.className = 'word-group';
        for (const ch of word) {
          const cell = document.createElement('div');
          cell.className = 'letter-cell';
          if (cellCount < 5) cell.classList.add('first-five');
          cell.dataset.letter = ch.toUpperCase();
          group.appendChild(cell);
          cellCount++;
        }
        container.appendChild(group);
      });
    }

    function normalizeKey(k) {
      const map = { 'Ã¤': 'Ã„', 'Ã¶': 'Ã–', 'Ã¼': 'Ãœ' };
      return map[k] || k.toUpperCase();
    }

    function handleKeyPress(event) {
      if (isCompleted || outOfLives || inputLocked) return;
      const k = normalizeKey(event.key);
      if (k.length === 1 && /[A-ZÃ„Ã–Ãœ]/.test(k)) {
        checkLetter(k);
      }
    }

    function checkLetter(letter) {
      const cells = document.querySelectorAll('.letter-cell');
      if (currentLetterIndex >= cells.length) return;

      const cell = cells[currentLetterIndex];
      const correct = cell.dataset.letter;
      cell.textContent = letter;

      if (letter === correct) {
        cell.classList.remove('incorrect');
        cell.classList.add('correct');
        currentLetterIndex++;

        if (currentLetterIndex === 5 && cells.length > 5) {
          for (let i = currentLetterIndex; i < cells.length; i++) {
            setTimeout(() => {
              cells[i].textContent = cells[i].dataset.letter;
              cells[i].classList.add('revealed');
            }, (i - currentLetterIndex) * 100);
          }
          setTimeout(completeMovie, (cells.length - currentLetterIndex) * 100 + 300);
        } else if (currentLetterIndex === cells.length) {
          completeMovie();
        }
      } else {
        inputLocked = true;
        cell.classList.add('incorrect');
        loseHeart();
        setTimeout(() => {
          if (outOfLives) return;
          for (let i = currentLetterIndex; i < cells.length; i++) {
            cells[i].textContent = '';
            cells[i].classList.remove('correct', 'incorrect', 'revealed');
          }
          inputLocked = false;
        }, 500);
      }
    }

    function completeMovie() {
      isCompleted = true;
      document.getElementById('nextButton').classList.add('show');
    }

    function nextMovie() {
      currentMovieIndex++;
      if (currentMovieIndex >= movies.length) {
        showGameOver();
      } else {
        loadMovie(currentMovieIndex);
      }
    }

    function showGameOver() {
      document.getElementById('gameArea').style.display = 'none';
      document.getElementById('gameOver').classList.add('show');
    }

    function restartGame() {
      currentMovieIndex = 0;
      document.getElementById('gameArea').style.display = 'block';
      document.getElementById('gameOver').classList.remove('show');
      loadMovie(0);
    }

    initGame();
  </script>
</body>
</html>

